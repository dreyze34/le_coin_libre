{% load static %}
{%include 'store/header.html'%}


<div class="bloc_produit_seul">
    <div class="photo_produit">
        <button class='button_gauche' id="changeButton" onclick="changeImageMoins()">&#60</button>
        <img id="image" src= '../static/images/{{Product.id}}/image1.jpg' alt="Image">
        <button class='button_droite' id="changeButton" onclick="changeImagePlus()">&#62</button>
    </div>
   
    <div class="description_produit_seul">
        <h1 class="titre_seul"> {{ Product.nom }} </h1>
        <h2 class="prix_seul"> {{ Product.prix }} € </h2>
        <p class="date_seul">{{Product.date}}</p>
        <div class="barre"></div>
        <h3 class="titre_description"></h3>Description </h3>
        <p class="description_seul"> {{ Product.description }} </p>
        
    </div>
</div>

<div id="productForm" style="display:none;">
    <form id="productForm" action="{% url 'order_product' %}" method="post">
        {% csrf_token %}
        <!-- Champs du formulaire -->

        <label for="productId">ID du Produit:</label>
        <input type="text" id="productId" name="productId">

        <!-- Bouton de soumission du formulaire -->
        <input type="submit" value="Réserver le produit">
    </form>
</div>

<script>
    function reserveProduct(productId) {
        // Mettre à jour les champs du formulaire avec les informations du produit
        document.getElementById('productId').value = productId;

        document.getElementById('productForm').style.display = 'block';

        // Soumettre automatiquement le formulaire
        document.getElementById('productForm').submit();
    }

    let currentIndex = 1; // Indice initial de l'image
    const totalImages = {{Product.nb_image}}; // Nombre total d'images

    function changeImagePlus() {
        currentIndex+=1;
        if (currentIndex > totalImages) {
            currentIndex = 1; // Revenir à la première image si on atteint la fin
        }
        
        const imageElement = document.getElementById('image');
        imageElement.src = `../static/images/{{Product.id}}/image${currentIndex}.jpg`; // Remplace image1.jpg, image2.jpg, etc.
    }

    function changeImageMoins() {
        currentIndex-=1;
        if (currentIndex <= 0) {
            currentIndex = totalImages; // Revenir à la première image si on atteint la fin
        }
        
        const imageElement = document.getElementById('image');
        imageElement.src = `../static/images/{{Product.id}}/image${currentIndex}.jpg`; // Remplace image1.jpg, image2.jpg, etc.
    }
</script>


{%include 'store/footer.html'%}